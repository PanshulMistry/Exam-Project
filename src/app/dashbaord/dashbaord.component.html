<nav class="custom-navbar navbar navbar-expand-lg navbar-dark bg-dark sticky-top shadow">
  <div class="container-fluid">
    <a class="navbar-brand" routerLink="/dashboard">Dashboard</a>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item">
          <a class="nav-link" routerLink="/dashboard">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" (click)="viewAdminDetails()">Profile</a>
        </li>
        <li class="nav-item">
          <a class="logout-btn d-flex align-items-center gap-1 mx-1" href="#" (click)="logout()">
            <i class="bi bi-box-arrow-right"></i> Logout
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>



<div class="container mt-4" >
  <div class="card shadow">
    <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h5 class="mb-0">User Management</h5>

      <div class="d-flex gap-2">
        <input type="text" class="form-control" style="width: 250px;" placeholder="Search by name or email"
          [(ngModel)]="searchText" (input)="applySearchFilter()" />

        <button class="btn btn-outline-light" (click)="exportToExcel()" title="Download users as Excel">
          <i class="bi bi-file-earmark-excel me-1"></i> Export to Excel
        </button>
      </div>
    </div>


    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover table-striped">
          <thead class="table-light">
            <tr>
              <th>#</th>
              <th>Name</th>
              <th>Email</th>
              <th>Gender</th>
              <th>View</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of filteredUsers; let i = index">
              <td>{{ (currentPage * pageSize) + (i + 1) }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.gender }}</td>
              <td>
                <button class="btn btn-sm btn-outline-primary" (click)="viewUserDetails(user.email)">
                  <i class="bi bi-people-fill me-1"></i> View Details
                </button>
              </td>
              <td class="actions-cell">
                <button class="btn btn-sm btn-outline-info me-2" (click)="editUserDetails(user.email)">
                  <i class="bi bi-pencil-square me-1"></i> Edit
                </button>
                <button class="btn btn-sm btn-outline-danger" (click)="deleteUser(user.email, i)">
                  <i class="bi bi-trash me-1"></i> Delete
                </button>
              </td>
            </tr>
            <tr *ngIf="filteredUsers.length === 0">
              <td colspan="6" class="text-center py-5">
                <div class="alert alert-warning mb-0">
                  <i class="bi bi-exclamation-triangle me-2"></i> No users found
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="d-flex justify-content-between align-items-center mt-3" *ngIf="totalItems > pageSize">
        <div class="pagination-info">
          Showing {{ currentPage * pageSize + 1 }} to {{ Math.min((currentPage + 1) * pageSize, totalItems) }} of {{
          totalItems }} entries
        </div>
        <nav>
          <ul class="pagination">
            <li class="page-item" [class.disabled]="currentPage === 0">
              <button class="page-link" (click)="onPageChange(0)">&laquo;</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage === 0">
              <button class="page-link" (click)="onPageChange(currentPage - 1)">‹</button>
            </li>
            <li class="page-item" *ngFor="let page of getPaginationRange()" [class.active]="page === currentPage + 1">
              <button class="page-link" (click)="onPageChange(page - 1)">{{ page }}</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage >= Math.ceil(totalItems / pageSize) - 1">
              <button class="page-link" (click)="onPageChange(currentPage + 1)">›</button>
            </li>
            <li class="page-item" [class.disabled]="currentPage >= Math.ceil(totalItems / pageSize) - 1">
              <button class="page-link" (click)="onPageChange(Math.ceil(totalItems / pageSize) - 1)">&raquo;</button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>